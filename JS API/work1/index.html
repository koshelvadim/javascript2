<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      .box {
        width: 100px;
        height: 100px;
        background-color: lightblue;
        margin: 10px;
        display: inline-block;
      }
      section {
        margin-bottom: 50px;
      }
    </style>
  </head>
  <body>
    <section class="task1">
      <h1>Определение текущего размера окна браузера</h1>
      <p>Ширина окна: <span class="window-size" id="width"></span> px</p>
      <p>Высота окна: <span class="window-size" id="height"></span> px</p>
    </section>

    <section class="task2">
      <h1>Подтверждение закрытия страницы</h1>
      <p>Это страница с подтверждением закрытия</p>
    </section>

    <section class="task3">
      <h1>Управление историей перехода</h1>
      <button class="hictory-button" id="goBack">Назад</button>
      <button class="hictory-button" id="goForward">Вперед</button>
    </section>

    <section class="task4">
      <button id="addButton">Добавить элемент</button>
      <button id="removeButton">Удалить элемент</button>
      <button id="cloneButton">Клонировать элемент</button>
      <div id="container">
        <div class="box">1</div>
        <div class="box">2</div>
        <div class="box">3</div>
      </div>
    </section>

    <section class="task5">
      <div class="container mt-5">
        <h1 class="mb-4">Список статей</h1>
        <ul class="list-group" id="articleList">
          <!-- Здесь будут статьи -->
        </ul>
        <button class="btn btn-primary mt-3" id="articleButton">
          Добавить статью
        </button>
      </div>
    </section>

    <script>
      //TASK1
      // const updateWindowSize = () => {
      //     const widthEL = window.innerWidth;
      //     const heightEl = window.innerHeight;

      //     width.textContent = widthEL;
      //     height.textContent = heightEl;
      // }

      // window.addEventListener('load', updateWindowSize);
      // window.addEventListener('resize', updateWindowSize);

      // TASK2
      // window.addEventListener('beforeunload', function (e) {
      //     e.preventDefault();
      //     e.returnValue = 'Text';
      // });

      //TASK3
      // goBack.addEventListener('load', function (e) {
      //     window.history.back();
      // });
      // goForward.addEventListener('load', function (e) {
      //     window.history.forward();
      // });

      //TASK4
      // addButton.addEventListener('click', function (e) {
      //     const newBox = document.createElement('div');
      //     newBox.classList.add('box');
      //     newBox.textContent = container.children.length + 1;
      //     container.append(newBox);
      // });
      // removeButton.addEventListener('click', function (e) {
      //     if(container.children.length > 0) {
      //         const lastBox = container.lastChild;
      //         container.removeChild(lastBox);
      //     }
      // });
      // cloneButton.addEventListener('click', function (e) {
      //     if(container.children.length > 0) {
      //         const lastBox = container.lastChild;
      //         const clone = lastBox.cloneNode(true);
      //         container.append(clone);
      //     }
      // });
    </script>
    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"></script> -->
    <script>
      //TASK5
      //JSON
      const articlesData = [
        {
          title: "Заголовок статьи 1",
          content: "Содержимое статьи 1",
        },
        {
          title: "Заголовок статьи 2",
          content: "Содержимое статьи 2",
        },
      ];

      articlesData.forEach((element) => {
        const articleItem = createArticle(element.title, element.content);
        articleList.append(articleItem);
      });

      function createArticle(title, content) {

        const articleItem = document.createElement("li");
        articleItem.classList.add("list-grope-item");

        const articleTitle = document.createElement("h2");
        articleTitle.classList.add("mb-3");
        articleTitle.textContent = title;

        const articleContent = document.createElement("p");
        articleContent.textContent = content;

        const editButton = document.createElement("button");
        editButton.textContent = "Редактировать";
        editButton.classList.add("btn", "btn-warning");

        const deleteButton = document.createElement("button");
        deleteButton.textContent = "Удалить";
        deleteButton.classList.add("btn", "btn-danger");

        articleItem.append(articleTitle);
        articleItem.append(articleContent);
        articleItem.append(editButton);
        articleItem.append(deleteButton);

        return articleItem;
      }

      articleButton.addEventListener('click', function (e) {
        const newArticle = {
            title: 'Новая статья',
            content: 'Новый контент'
        }

        const articleItem = createArticle(newArticle.title, newArticle.content);
        articleList.append(articleItem);
      });

      articleList.addEventListener('click', function (e) {
        if (e.target.textContent === 'Удалить') {
            const articleItem = e.target.closest('li');
            articleItem.remove();
        }
        if (e.target.textContent === 'Редактировать') {
            const articleItem = e.target.closest('li');
            const articleTitle = articleItem.querySelector('h2');
            const articleContent = articleItem.querySelector('p');

            const newTitle = prompt('Введите новый заголовок', articleTitle.textContent);
            const newContent = prompt('Введите новое содержимое', articleContent.textContent);

            if (newTitle != null && newContent != null) {
                articleTitle.textContent = newTitle;
                articleContent.textContent = newContent;
            }
        }

      });
    </script>
  </body>
</html>
